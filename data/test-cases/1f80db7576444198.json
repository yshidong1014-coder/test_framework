{"uid":"1f80db7576444198","name":"test_get_booking_framework","fullName":"test_framework#test_get_booking_framework","historyId":"4113791685fdffa19d2e28488b6606f6","time":{"start":1766132004548,"stop":1766132004561,"duration":13},"status":"broken","statusMessage":"TypeError: BookingApi.delete_booking() missing 1 required positional argument: 'token'","statusTrace":"booking_service = <api_objects.booking_api.BookingApi object at 0x7f9b76566c50>\n\n    @pytest.fixture(scope=\"function\")\n    def active_booking_id(booking_service):\n        # 1. 创建数据\n        data = {\n            \"firstname\": \"Test\", \"lastname\": \"User\", \"totalprice\": 100,\n            \"depositpaid\": True, \"bookingdates\": {\"checkin\": \"2024-01-01\", \"checkout\": \"2024-01-02\"},\n            \"additionalneeds\": \"Breakfast\"\n        }\n        # 假设你的 API 对象有 create_booking 方法\n        # 如果没有，用 playwright 原生发一个请求也可以\n        res = booking_service.create_booking(data)\n        booking_id = res.json()[\"bookingid\"]\n        print(f\"创建临时测试数据 ID: {booking_id}\")\n    \n        yield booking_id\n    \n        # 2. 清理数据 (Teardown)\n        print(f\"清理测试数据 ID: {booking_id}\")\n>       booking_service.delete_booking(booking_id)\nE       TypeError: BookingApi.delete_booking() missing 1 required positional argument: 'token'\n\ntest_framework.py:51: TypeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1766132004137,"stop":1766132004137,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1766132004137,"stop":1766132004138,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1766132004138,"stop":1766132004138,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1766132004138,"stop":1766132004409,"duration":271},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1766132004138,"stop":1766132004138,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"booking_service","time":{"start":1766132004409,"stop":1766132004486,"duration":77},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"active_booking_id","time":{"start":1766132004535,"stop":1766132004548,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"active_booking_id::0","time":{"start":1766132004561,"stop":1766132004561,"duration":0},"status":"broken","statusMessage":"TypeError: BookingApi.delete_booking() missing 1 required positional argument: 'token'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/allure_commons/_allure.py\", line 231, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/_pytest/fixtures.py\", line 924, in _teardown_yield_fixture\n    next(it)\n  File \"/home/runner/work/test_framework/test_framework/test_framework.py\", line 51, in active_booking_id\n    booking_service.delete_booking(booking_id)\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"booking_service::0","time":{"start":1766132013382,"stop":1766132013384,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1766132013384,"stop":1766132013392,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"架构模式获取测试"},{"name":"suite","value":"test_framework"},{"name":"host","value":"runnervmh13bl"},{"name":"thread","value":"3234-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_framework"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"1f80db7576444198.json","parameterValues":[]}